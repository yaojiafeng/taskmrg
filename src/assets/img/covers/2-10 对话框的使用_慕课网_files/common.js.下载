define("lesson/js/common",["require"],function(t){function n(t){var n=80,i=null;this.x=0,this.leftPannel=$(t.left),this.rightPannel=$(t.right),this.dragger=$(t.dragger),this.container=$(t.container),this.start=function(t){this.x=t.clientX,this.lw=this.leftPannel.width(),this.rw=this.rightPannel.width(),this.mw=this.container.width(),this.minw={l:this.leftPannel.data("minw"),r:this.rightPannel.data("minw")},this.container.css({"user-select":"none"}).attr("unselectable","on"),$(document).on("mousemove.webide",$.proxy(this.move,this)).on("mouseup.webide",$.proxy(this.stop,this))},this.move=function(e){var s=e.clientX-this.x,o=this.lw;s&&(o=Math.max(this.minw.l,o+s),o=Math.min(o,this.mw-this.minw.r),this.leftPannel.width(o),this.rightPannel.css("left",o),t.move&&t.move(),i&&clearTimeout(i),i=setTimeout(function(){t.stop&&t.stop()},n))},this.stop=function(){this.x=0,this.container.removeAttr("unselectable"),$(document).off("mousemove.webide")},this.init=function(){this.dragger.on("mousedown.webide",$.proxy(this.start,this)).on("selectstart",!1)},this.init()}function i(t){this.form=$(t.form),this.opt=t,this.init(t)}function e(t){this.max=t.max||300,this.min=t.min||5,this.ipt=null,this.len=0,this.result={},this.init(t)}function s(t){this.init(t)}!function(t){"use strict";function n(){var t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in n)if(void 0!==t.style[i])return{end:n[i]};return!1}t.fn.emulateTransitionEnd=function(n){var i=!1,e=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(e).trigger(t.support.transition.end)};return setTimeout(s,n),this},t.support.transition=n(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(n){return t(n.target).is(this)?n.handleObj.handler.apply(this,arguments):void 0}})}(jQuery),function(t,n,i){function e(t){return t=t||location.href,"#"+t.replace(/^[^#]*#?(.*)$/,"$1")}var s,o="hashchange",r=document,a=t.event.special,c=r.documentMode,h="on"+o in n&&(c===i||c>7);t.fn[o]=function(t){return t?this.bind(o,t):this.trigger(o)},t.fn[o].delay=50,a[o]=t.extend(a[o],{setup:function(){return h?!1:void t(s.start)},teardown:function(){return h?!1:void t(s.stop)}}),s=function(){function s(){var i=e(),r=f(u);i!==u?(d(u=i,r),t(n).trigger(o)):r!==u&&(location.href=location.href.replace(/#.*/,"")+r),a=setTimeout(s,t.fn[o].delay)}var a,c={},u=e(),l=function(t){return t},d=l,f=l;return c.start=function(){a||s()},c.stop=function(){a&&clearTimeout(a),a=i},t.support.boxModel&&t.support.leadingWhitespace&&!h&&function(){var n,i;c.start=function(){n||(i=t.fn[o].src,i=i&&i+e(),n=t('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){i||d(e()),s()}).attr("src",i||"javascript:0").insertAfter("body")[0].contentWindow,r.onpropertychange=function(){try{"title"===event.propertyName&&(n.document.title=r.title)}catch(t){}})},c.stop=l,f=function(){return e(n.location.href)},d=function(i,e){var s=n.document,a=t.fn[o].domain;i!==e&&(s.title=r.title,s.open(),a&&s.write('<script>document.domain="'+a+'"</script>'),s.close(),n.location.hash=i)}}(),c}()}(jQuery,window);var o={};o.eventProxy={events:{},_evts:[],on:function(t,n){return this.events[t]||(this.events[t]=[]),this.events[t].push(n),this},all:function(t,n){var i,e=[];e=t.split(" "),i={names:e.join(""),count:e.length,flag:0,exec:function(){n()}},this._evts.push(i)},emmitOne:function(t){$.each(this._evts,function(n,i){-1!=i.names.indexOf(t)&&(i.flag++,i.flag===i.count&&i.exec())})},emmit:function(t,n){var i=this.events[t];if(i)for(var e=0;e<i.length;e++)"function"==typeof i[e]&&i[e].call(this,n)}},o.idrag={create:function(t){return new n(t)}},o.escapeHtml=function(t){var n=$("<div/>").text(t);return n.html()},o.unescapeHtml=function(t){var n={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return t.replace(/&(lt|gt|nbsp|amp|quot);/gi,function(t,i){return n[i]})},$.fn.verifyCode=function(){return this.each(function(){var t=$(this);t.on("click",".js-verify-refresh",function(){t.trigger("reset")}).on("reset",function(t,n){var i=$(this),e=i.find(".ipt"),s=(i.find(".js-verify-refresh:first"),i.find(".verify-media")),o=s.data("src").split("?")[0],r=(new Date).getTime(),n=0==n?n:1;s.attr("src",o+"?"+r),e.val(""),n&&e.focus().select()}).on("error",function(){$(this).addClass("vf-error")}).on("validate",function(){var t=$(this).find(".ipt"),n=t.val().trim();(!n||n.length<4)&&$(this).trigger("error")}).find(".ipt").on("keyup",function(){t.removeClass("vf-error")}).on("blur",function(){})})},$.extend(i.prototype,{init:function(t){this.url=t.url||this.form.attr("action"),this.method=t.method||"post",this.data={},this.submitBtn=this.form.find(".submit"),this.rules={name:{}},this.bindEvents(),t.init&&t.init.call(this)},beforeSubmit:function(){return this.opt.beforeSubmit&&this.opt.beforeSubmit.call(this,this.data)},submit:function(){var t=this;$.ajax({url:this.url,type:this.method,data:this.data,dataType:"json"}).success(function(n){t.opt.success.call(t,n)}).error(function(n){t.opt.error.call(t,n)}).done(function(n){t.submitBtn.removeClass("waiting"),t.submitBtn.text(t.submitBtn.data("text")),t.opt.done.call(t,n)})},onsubmit:function(){var t=this,n=t.form.serializeArray();$.each(n,function(n,i){t.data[i.name]=i.value}),t.beforeSubmit()!==!1&&t.submit()},disableBtn:function(){this.submitBtn.addClass("disabled")},enableBtn:function(){this.submitBtn.removeClass("disabled")},bindEvents:function(){var t=this;this.submitBtn.on("click.form",function(){$(this).hasClass("waiting")||$(this).hasClass("disabled")||($(this).addClass("waiting"),t.onsubmit())})},showIptError:function(t,n){t.focus().parents(".row:first").find(".ipt-tip").text(n).addClass("error")},reset:function(){this.data={},this.opt.reset.call(this)},msg:function(t){this.modal&&this.modal.hide(),this.modal=$.modalMsg(t)}}),$.fn.Form=function(t){return t.form=this,new i(t)},$.fn.iswitch=function(){var t="name-";return this.each(function(){function n(){o=1==s?1:0,e.val(o),s?i.data("selected",1):i.data("selected",0)}if($(this).data("switch"))return $(this);var i=$(this),e=$("#"+t+i.data("hidden")),s=!0,o=1;i.on("click.switch",function(){0==s?(s=!0,i.removeClass("close")):(s=!1,i.addClass("close")),n()}),n(),$(this).data("switch",!0)})},$.fn.checkbox=function(){var t="#name-";return this.each(function(){function n(){o=1==s?1:0,i.val(o)}var i=$(t+$(this).data("hidden")),e=$(this),s=!1,o=0;e.on("click.checkbox",function(){1==s?(s=!1,$(this).removeClass("checked").find("i").attr("class","sz-check-o")):(s=!0,$(this).addClass("checked").find("i").attr("class","sz-check")),n()}),e.data("selected")&&e.trigger("click.checkbox")})},$.extend(e.prototype,{init:function(t){this.opt=t,this.wrap=$(t.wrap),this.ipt=$(t.ipt),this.wrap.insertBefore(this.ipt),this.ipt.appendTo(this.wrap);var n=$('<span class="num"><b>0</b>/'+this.max+"</span>");this.wrap.append(n),this.num=n.find("b"),this.bindEvents()},valid:function(){},tip:function(){this.opt.tip&&this.opt.tip.call(this,this.result)},bindEvents:function(){var t=this;this.ipt.on({focusin:function(){t.wrap.addClass("focus")},focusout:function(){t.wrap.removeClass("focus")},keyup:function(){var n=t.ipt.val().trim(),i=n.length,e=1,s="";i<t.min?(e=0,s="输入字符不能小于"+t.min):i>t.max&&(e=0,s="输入字符不能大于"+t.max),t.num.text(i),t.result={code:e,msg:s},t.tip()}})},reset:function(){this.num.text(0),this.ipt.val("")}}),$.fn.textarea=function(t){t=t||{},t.ipt=this,t.wrap='<div class="wgt-textarea"></div>';var n=new e(t);return $(this).data("$textarea",n),n},$.fn.itabs=function(t){t=t||{};var n=t.activeClass||"active";return this.each(function(){var i=$(this),e=i.data("key")+"-pannel-",s=i.find(".tab-bars"),o=i.find(".tab-pannel"),r={};r={change:t.change||$.loop},s.find("a").each(function(t){var n=$(this).data("key");o.eq(t).data("key",n).attr("id",e+n)}),s.on("click","a",function(){if(!$(this).hasClass(n)){var t=$(this).index(),e=o.eq(t);return s.find("."+n).removeClass(n),$(this).addClass(n),o.hide(),e.show(),r.change.call(i,t,$(this),e),!1}}),s.find(".bar-item:first").trigger("click")})},$.extend(s.prototype,{tpl:function(){return $("#modal-msg-tpl").html()},init:function(t){this.state=t.state,this.msg=t.msg,this.dom=$(juicer(this.tpl(),{state:this.state,msg:this.msg})),this.show()},show:function(){this.dom.hide().appendTo("body").show(),this.dom.offset(),this.dom.removeClass("out"),this.dom.addClass("in fadeInDown animated"),this.startTimer()},hide:function(){this.dom.addClass("fadeOutUp")},startTimer:function(){var t=this;this.timer=setTimeout(function(){t.hide(),setTimeout(function(){t.dom.removeClass("in").addClass("out")},750),t.dom.one("bsTransitionEnd",function(){}).emulateTransitionEnd(750)},2e3)}}),$.modalMsg=function(t){return new s(t)},$.getUrlParam=function(t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(n);return null!=i?unescape(i[2]):null},$.hash=function(t,n){function i(t){return"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)}if(i(t)&&""!=t){var e=new RegExp("(&"+t+"=[^&]*)|(\\b"+t+"=[^&]*&)|(\\b"+t+"=[^&]*)","ig"),s=new RegExp("&*\\b"+t+"=[^&]*","i");if("undefined"==typeof n){var o=location.hash.match(s);return o?decodeURIComponent($.trim(o[0].split("=")[1])):null}if(null===n)location.hash=location.hash.replace(e,"");else{n+="";var r=location.hash.replace(e,"");r+=(-1!=r.indexOf("=")?"&":"")+t+"="+encodeURIComponent(n),location.hash=r}}},$.imodal=function(){},$.imodal.confirm=function(t){var n=$("#confirm-modal-tpl").html(),i=null,e=$('<div class="modal-block"/>'),s=$.Deferred();return t.title=t.title||"Confirm",t.content=t.content||"确认操作吗？",i=$(juicer(n,{title:t.title,content:t.content})),i.on("click","[data-role=close]",function(){s.resolve("no",i),i.trigger("hide.imodal")}).on("click",".modal-btn-ok",function(){s.resolve("yes",i),i.trigger("hide.imodal")}).on("hide.imodal",function(){s.reject(null,i),i.remove(),e.remove()}),e.appendTo("body"),i.appendTo("body").show().width(),i.addClass("in"),s.promise()};var r=function(){function n(n,i){var e=n,s=e.find(".scroller"),o=e.height(),r=s.height();return e.hasClass("ps-container")?void setTimeout(function(){var t=e.scrollTop()||0;e[0].scrollTop=i===!0?0:t,e.perfectScrollbar("update")},0):void(r>o&&t(["scrollbar"],function(){setTimeout(function(){e.perfectScrollbar({wheelSpeed:30,wheelPropagation:!1}),"function"==typeof i&&i()},0)}))}function i(t){t.perfectScrollbar&&t.perfectScrollbar("destroy"),t.removeClass("ps-container")}function e(t){t.perfectScrollbar&&t.perfectScrollbar("update")}return{init:n,destroy:i,update:e}}();return o.scrollbar=r,o});